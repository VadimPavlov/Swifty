//
//  {{ module_info.file_name }}
//  {{ module_info.project_name }}
//
//  Created by {{ developer.name }} on {{ date }}.
//  Copyright Â© {{ year }} {{ developer.company }}. All rights reserved.
//

import UIKit
import Swifty

{%  assign Segue1 = custom_parameters.segue1 -%}
{%- assign Segue2 = custom_parameters.segue2 -%}
{%- assign Segue3 = custom_parameters.segue3 -%}
{%- assign Segue4 = custom_parameters.segue4 -%}
{%- assign Segue5 = custom_parameters.segue5 -%}

{%- if Segue1 -%} 
typealias {{ Segue1 }}ModuleInput = Any
typealias {{ Segue1 }}ViewController = UIViewController
{%- else -%}
typealias ExampleModuleInput = Any
typealias ExampleViewController = UIViewController
{%- endif %}
{%- if Segue2 %} 
typealias {{ Segue2 }}ModuleInput = Any
typealias {{ Segue2 }}ViewController = UIViewController
{%- endif -%}
{%- if Segue3 %} 
typealias {{ Segue3 }}ModuleInput = Any
typealias {{ Segue3 }}ViewController = UIViewController
{%- endif -%}
{%- if Segue4 %} 
typealias {{ Segue4 }}ModuleInput = Any
typealias {{ Segue4 }}ViewController = UIViewController
{%- endif -%}
{%- if Segue5 %} 
typealias {{ Segue5 }}ModuleInput = Any
typealias {{ Segue5 }}ViewController = UIViewController
{%- endif %}

protocol {{ module_info.name }}Router: class {
	func open(screen: {{ module_info.name }}ViewController.Screen)
}

extension {{ module_info.name }}ViewController: {{ module_info.name }}Router, Router {

	enum Segue: String {
	{%- if Segue1 %}
		case {{ Segue1 }}
	{% else %}
		case example
	{%- endif -%}
	
	{% if Segue2 %}
		case {{ Segue2 }}
	{%- endif -%}
	
	{% if Segue3 %}
		case {{ Segue3 }}
	{%- endif -%}
	
	{% if Segue4 %}
		case {{ Segue4 }}
	{%- endif -%}

	{% if Segue5 %}
		case {{ Segue5 }}
	{%- endif %}		
	}

	enum Screen {
	{%- if Segue1 %} 
		case {{ Segue1 }}({{ Segue1 }}ModuleInput)
 	{% else %}
		case example(ExampleModuleInput)
	{%- endif -%}
	
	{% if Segue2 %} 
		case {{ Segue2 }}({{ Segue2 }}ModuleInput)
	{%- endif -%}
	
	{% if Segue3 %}
		case {{ Segue3 }}({{ Segue3 }}ModuleInput)
	{%- endif -%}
	
	{% if Segue4 %} 
		case {{ Segue4 }}({{ Segue4 }}ModuleInput)
	{%- endif -%}

	{% if Segue5 %} 
		case {{ Segue5 }}({{ Segue5 }}ModuleInput)
	{%- endif %}
	}

	func open(screen: Screen) {
		switch screen {
		{%- if Segue1 %}
		case .{{ Segue1 }}(let input): performSegue(.{{Segue1}}, sender: input)
		{% else %}
		case .example(let input): performSegue(.example, sender: input)
		{%- endif -%}

		{% if Segue2 %}
		case .{{ Segue2 }}(let input): performSegue(.{{Segue2}}, sender: input)
		{%- endif -%}

		{% if Segue3 %}
		case .{{ Segue3 }}(let input): performSegue(.{{Segue3}}, sender: input)
		{%- endif -%}

		{% if Segue4 %}
		case .{{ Segue4 }}(let input): performSegue(.{{Segue4}}, sender: input)
		{%- endif -%}

		{% if Segue5 %}
		case .{{ Segue5 }}(let input): performSegue(.{{Segue5}}, sender: input)
		{%- endif %}
		}
	}
	
	func prepareSegue(_ segue: Segue, destination: UIViewController, sender: Any?) {
		switch segue {
		{%- if Segue1 %}
		case .{{ Segue1 }}:
//			if let view = destination as? {{ Segue1 }}ViewControlle, let input = sender as? {{ Segue1 }}ModuleInput {
//				//{{Segue1}}Module.build(view: view, input: input)
//			}
			break
		{% else %}
		case .example:
//			if let view = destination as? ExampleViewController, let input = sender as? ExampleModuleInput {
//				ExampleModule.build(view: view, input: input)
//			}
			break
		{%- endif -%}

		{% if Segue2 %}
		case .{{ Segue1 }}:
//			if let view = destination as? {{ Segue1 }}ViewControlle, let input = sender as? {{ Segue1 }}ModuleInput {
//				{{Segue1}}Module.build(view: view, input: input)
//			}
			break
		{%- endif -%}

		{% if Segue3 %}
		case .{{ Segue1 }}:
//			if let view = destination as? {{ Segue1 }}ViewControlle, let input = sender as? {{ Segue1 }}ModuleInput {
//				{{Segue1}}Module.build(view: view, input: input)
//			}
			break
		{%- endif -%}

		{% if Segue4 %}
		case .{{ Segue1 }}:
//			if let view = destination as? {{ Segue1 }}ViewControlle, let input = sender as? {{ Segue1 }}ModuleInput {
//				{{Segue1}}Module.build(view: view, input: input)
//			}
			break
		{%- endif -%}

		{% if Segue5 %}
		case .{{ Segue1 }}:
//			if let view = destination as? {{ Segue1 }}ViewControlle, let input = sender as? {{ Segue1 }}ModuleInput {
//				{{Segue1}}Module.build(view: view, input: input)
//			}
			break
		{%- endif %}
		}
	}
	
	override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
		super.prepare(for: segue, sender: sender)
		self.prepare(storyboardSegue: segue, sender: sender)
	}
    
}
